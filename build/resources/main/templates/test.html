<!DOCTYPE HTML>
<html>
<head>
    <title> SpringBoot & AWS S3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script
            src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</head>
<body>
<h1>
    S3 이미지 업로더
</h1>
<div class="col-md-12">
    <div class="col-md-2">
        <form class="form-horizontal" enctype="multipart/form-data" id="form">

            <!-- Image upload -->
                <div class="form-group">
                    <input type="file" name="file" id="file"/>
                </div>

            <!-- submit button -->
            <div class="card signup-form border-0">
                <button type="submit" style="position: relative; left: 1.5px;"
                        class="btn btn-dark text-uppercase" id="save">registration
                </button>
            </div>

        </form>
    </div>

    <div class="col-md-10">
        <p><strong>결과 이미지입니다.</strong></p>
        <img src="" id="result-image">
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<script>
 $('#save').on('click', function () {

         var form =$('#form')[0];
         var formData = new FormData(form);
         formData.append('file', $('#file'));
<!--         formData.append('key', new Blob([JSON.stringify(data)] ,{type: "application/json"}))-->;

     $.ajax({
         type: 'POST',
         url: '/upload',
         processData: false,
         contentType:false,
         data: formData,
     }).done(function(){
      alert('저장 성공');
     }).fail(function (error) {
     alert(JSON.stringify(error));
     });
 });

</script>
</body>
</html>